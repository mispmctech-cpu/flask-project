<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Queries Form</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
</head>
<body class="bg-purple-50 min-h-screen flex flex-col items-center justify-center">
  <header class="w-full max-w-2xl text-center mt-8 mb-4">
    <h1 class="text-2xl md:text-3xl font-bold text-purple-800 mb-2">FACULTY WORK ASSESSMENT PROGRESSION MANAGEMENT SYSTEM</h1>
    <h2 class="text-lg text-purple-600 font-semibold mb-4">QUERIES FORM</h2>
  </header>
  <div class="bg-white rounded-xl shadow-lg px-8 py-8 w-full max-w-md flex flex-col items-center">
    <form id="queries-form" class="flex flex-col gap-4 w-full">
      <input type="text" id="name" placeholder="Name" required class="p-3 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-800" />
      <input type="text" id="department" placeholder="Department" required class="p-3 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-800" />
      <input type="text" id="mobile" placeholder="Mobile Number" required class="p-3 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-800" />
      <input type="email" id="mail" placeholder="Mail ID" required class="p-3 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-800" />
      <textarea id="queries" placeholder="Your Query" required class="p-3 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-800"></textarea>
      <button type="submit" class="bg-purple-800 hover:bg-green-500 text-white font-semibold py-3 rounded-lg transition-colors duration-200 shadow">Submit Query</button>
    </form>
    <div id="success-message" class="hidden text-green-600 mt-4 font-semibold">Query submitted successfully!</div>
    <div id="error-message" class="hidden text-red-600 mt-4 font-semibold"></div>
  </div>
  <script>
    const SUPABASE_URL = "https://cbhodgwaazmjszkujrti.supabase.co";
    const SUPABASE_ANON_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImNiaG9kZ3dhYXptanN6a3VqcnRpIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTU2NzY4NzEsImV4cCI6MjA3MTI1Mjg3MX0.sBRdfiWJJmZtLWsHCcNyxm1VcwkGwZWsIeeMlS49XTU";
    const supabaseClient = window.supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);
    document.getElementById('queries-form').addEventListener('submit', async (e) => {
      e.preventDefault();
      const name = document.getElementById('name').value.trim();
      const department = document.getElementById('department').value.trim();
      const mobile = document.getElementById('mobile').value.trim();
      const mail = document.getElementById('mail').value.trim();
      const queries = document.getElementById('queries').value.trim();
      const successMsg = document.getElementById('success-message');
      const errorMsg = document.getElementById('error-message');
      successMsg.classList.add('hidden');
      errorMsg.classList.add('hidden');
      const { error } = await supabaseClient
        .from('Queries')
        .insert({
          "Name": name,
          "department": department,
          "mobile number": mobile,
          "mail id": mail,
          "queries": queries
        });
      if (error) {
        errorMsg.textContent = 'Error: ' + (error.message || 'Could not submit query.');
        errorMsg.classList.remove('hidden');
      } else {
        successMsg.classList.remove('hidden');
        document.getElementById('queries-form').reset();
      }
    });
  </script>
</body>
</html>
